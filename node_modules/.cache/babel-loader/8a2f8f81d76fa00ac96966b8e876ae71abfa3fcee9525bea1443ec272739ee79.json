{"ast":null,"code":"'use strict';\n\nconst IOBuffer = require('iobuffer');\nconst tiff = require('tiff');\nfunction decode(data) {\n  const buffer = new IOBuffer(data);\n  const result = {};\n  buffer.setBigEndian();\n  const val = buffer.readUint16();\n  if (val !== 0xffd8) {\n    throw new Error('SOI marker not found. Not a valid JPEG file');\n  }\n  const next = buffer.readUint16();\n  if (next === 0xffe1) {\n    const length = buffer.readUint16();\n    const header = buffer.readBytes(6);\n    if (header[0] === 69 &&\n    // E\n    header[1] === 120 &&\n    // x\n    header[2] === 105 &&\n    // i\n    header[3] === 102 &&\n    // f\n    header[4] === 0 && header[5] === 0) {\n      //     buffer.skip(2);\n      const exif = tiff.decode(buffer, {\n        onlyFirst: true,\n        ignoreImageData: true,\n        offset: buffer.offset\n      });\n      result.exif = exif;\n    }\n  }\n  return result;\n}\nmodule.exports = decode;","map":{"version":3,"names":["IOBuffer","require","tiff","decode","data","buffer","result","setBigEndian","val","readUint16","Error","next","length","header","readBytes","exif","onlyFirst","ignoreImageData","offset","module","exports"],"sources":["C:/Users/Admin/Documents/Workspace/opencv/opencv/node_modules/fast-jpeg/src/decode.js"],"sourcesContent":["'use strict';\n\nconst IOBuffer = require('iobuffer');\nconst tiff = require('tiff');\n\nfunction decode(data) {\n    const buffer = new IOBuffer(data);\n    const result = {};\n    buffer.setBigEndian();\n    const val = buffer.readUint16();\n    if (val !== 0xffd8) {\n        throw new Error('SOI marker not found. Not a valid JPEG file');\n    }\n    const next = buffer.readUint16();\n    if (next === 0xffe1) {\n        const length = buffer.readUint16();\n        const header = buffer.readBytes(6);\n        if (header[0] === 69 && // E\n            header[1] === 120 && // x\n            header[2] === 105 && // i\n            header[3] === 102 && // f\n            header[4] === 0 &&\n            header[5] === 0) {\n       //     buffer.skip(2);\n            const exif = tiff.decode(buffer, {\n                onlyFirst: true,\n                ignoreImageData: true,\n                offset: buffer.offset\n            });\n            result.exif = exif;\n        }\n    }\n    return result;\n}\n\nmodule.exports = decode;\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AACpC,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAE5B,SAASE,MAAMA,CAACC,IAAI,EAAE;EAClB,MAAMC,MAAM,GAAG,IAAIL,QAAQ,CAACI,IAAI,CAAC;EACjC,MAAME,MAAM,GAAG,CAAC,CAAC;EACjBD,MAAM,CAACE,YAAY,CAAC,CAAC;EACrB,MAAMC,GAAG,GAAGH,MAAM,CAACI,UAAU,CAAC,CAAC;EAC/B,IAAID,GAAG,KAAK,MAAM,EAAE;IAChB,MAAM,IAAIE,KAAK,CAAC,6CAA6C,CAAC;EAClE;EACA,MAAMC,IAAI,GAAGN,MAAM,CAACI,UAAU,CAAC,CAAC;EAChC,IAAIE,IAAI,KAAK,MAAM,EAAE;IACjB,MAAMC,MAAM,GAAGP,MAAM,CAACI,UAAU,CAAC,CAAC;IAClC,MAAMI,MAAM,GAAGR,MAAM,CAACS,SAAS,CAAC,CAAC,CAAC;IAClC,IAAID,MAAM,CAAC,CAAC,CAAC,KAAK,EAAE;IAAI;IACpBA,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG;IAAI;IACrBA,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG;IAAI;IACrBA,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG;IAAI;IACrBA,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,IACfA,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE;MACtB;MACK,MAAME,IAAI,GAAGb,IAAI,CAACC,MAAM,CAACE,MAAM,EAAE;QAC7BW,SAAS,EAAE,IAAI;QACfC,eAAe,EAAE,IAAI;QACrBC,MAAM,EAAEb,MAAM,CAACa;MACnB,CAAC,CAAC;MACFZ,MAAM,CAACS,IAAI,GAAGA,IAAI;IACtB;EACJ;EACA,OAAOT,MAAM;AACjB;AAEAa,MAAM,CAACC,OAAO,GAAGjB,MAAM","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}